<html>
<head>
  <title>SPIRE - Configuration files</title>
  <LINK href="style.css" type= text/css rel=stylesheet>
</head>

<body>

<table class="navi" cellpadding=8>
  <tr>
  <td>                Back: <a href="config.html">Configuration</a></td>
  <td align="center"> Home: <a href="index.html">Table of Contents</a></td>
  <td align="right">  Next: <a href="configedit.html">Edit configuration</a></td>
  </tr>
</table>

<p> 
<h2 class="title">Reading Configuration information from a text file</h2>
</p>

<p>
How to create a configuration XML file, given a set of Procedure files? Spire needs to know
<ol>
<li>The order in which the Procedure files must run.</li>
<li>Which directories the Procedure files belong in.</li>
<li>How the Procedure files are organized into dialogs.</li>
<br />This is enough to create a config.xml file. But this file still requires some editing. Additional information is required:
<li>The source location(s) of the Procedure files (the <code>&lt;Locations&gt;</code> tag).</li>
<li>Project info in (title, image, helpurl) in the  <code>&lt;Main&gt;</code> tag </li>
<li>Button info for each Procedure file (comment_label, button_text, program_name)</li>
</ol>

<p></p>
<b>Creating a Spire configuration from a text file.</b>
<p></p>
The text file must contain a list of SPIDER Procedure files, and specify
which directories and dialogs they belong to. Python programs and other
non-SPIDER executables are also allowed. The order of the list indicates
the order for running the programs.
<p></p>
<ul>
<li> Each item should be on a separate line. Only the first string is used:
 anything separated by a space is assumed to be a comment.</li>
<li> Directories are indicated by the &lt;dir&gt; tag (or start the line with '#').</li>
<li> Dialogs are indicated by a separating blank line.</li>
<li> Procedure files may have a path, e.g. Alignment/alignsh.spi</li>
<li> Non-SPIDER programs should be in parentheses<br />Python programs: if the Python script is a "Procedure file" (link to Spider Python Library) then do not use parentheses. If it is an independent executable (e.g., <a href="">graphics tools</a> such as ctfgroup), then it must be enclosed in parentheses.</li>
<li> Labels for dialog buttons may be included as brief comments on the same
line as the Procedure file, separated by parentheses, or simply a space.</li>
<li> Other configuration information may be included, indicated by tags. See
the SPIRE documentation on configuration files. This could include &lt;title&gt;,
&lt;image&gt;, &lt;helpurl&gt;, and &lt;location&gt; tags. Tag information must be on a single line.</li>
</li>
<pre>
example:
&lt;dir&gt;.&lt;/dir&gt;   top-level project directory
resizevol.spi

# Power_Spectra
power.spi
defocus.spi
(ctfmatch.py)
(ctfgroup)  adjust defocus grouping

# Particles
noise    get noise file
lfc_pick.spi
pnums.spi
(web)   pick first & last good particles
</pre>
This example has three directories, the project directory, Power_Spectra/ and
Particles/. Each directory is put in a separate dialog. (Show XML file generated from this input)
<p></p>
A directory may be split across dialogs, but you can't have multiple directories
in the same dialog, because a dialog defines a directory to run Procedure files in.
However you can run Procedure files in other directories, e.g., ../Alignment/run.spi
<p></p>

<!--
Show progressively more complicated examples (and XML generated)<br />
- just a list of Procedure files : shows order, one big dialog, one directory<br />
- dialog grouping, one directory<br />
- directory grouping <br />
- both plus comments<br />
<p></p>

Where's the button in the config window?

Ask the user to save a config when a new one is read in
-->

<p>
<img src="pics/spiderline.gif"><br />

<a href="config.html">    <img src="pics/left_button.gif"> </a>
<a href="index.html">     <img src="pics/up_button.gif">   </a>
<a href="configedit.html"><img src="pics/right_button.gif"></a>

</body>
</html>
