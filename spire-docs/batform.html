<html>
<head>
  <title>SPIRE: Procedure file form</title>
  <LINK href="style.css" type= text/css rel=stylesheet>
</head>

<body>

<table class="navi" cellpadding=8>
<tr>
<td>                Back: <a href="run.html">       Running Procedure files      </a></td>
<td align="center">       <a href="index.html">     Table of Contents            </a></td>
<td align="right">  Next: <a href="wellformed.html">SPIDER Procedure file headers</a></td>
</tr></table>

<h2 class="title">The Procedure file edit form</h2>

<br />
<p>
Spire can present a Procedure file in a graphical form, with entry boxes for the 
user to enter or verify values. <b>This only works if the Procedure file has a  
<a href="wellformed.html">proper Procedure file header</a></b>. If your Procedure file does 
not have a properly written header, Spire will try to inform you about errors it 
encountered. After making the desired changes to the form, and hitting the <i>Save</i> 
button, Spire will write the new values into the procedure file.
</p>

<p>
Below is a Procedure header that produces the form on the right. Note the three 
sections for <i>Registers</i>, <i>Input files</i>, <i>Output files</i> (you can 
have as many filename sections as you want, but only one register section).
</p>

<p>
<img src="pics/batform.gif" align="right">
</p>

<p>
<table class="code"><tr><td><pre>

 x91 = 1        ; The first particle number
 x87 = 2        ; Overview number
 x59 = 0.75     ; Peak separation distance

 ; ----------- Input files --------------
 FR G
   [params]../params                ; Parameter file 
 FR G
   [filenums]../filenums            ; File numbers
 FR G
   [mic]../Micrographs/mic{****x55} ; Micrographs
 FR G
   [refvol]../reference_volume      ; Reference volume
 FR G
   [noise]./noise                   ; Noise file

 ; ----------- Output files --------------
 FR G
   [ser]win/ser                     ; Template for particle images
 FR G
   [sndc]coords/sndc{****x55}       ; Coordinate doc files

; -------------- END Procedure HEADER ---------------

</pre></td></tr></table>

</p>

<p> <b>Sections</b>: each section must begin with a comment line that has text enclosed in a 
row of minus signs, such as <br />
<code>; ------ Input files -----</code><br />
Sections are outlined in the form with the section heading in the upper left corner.
<br /><br />
<b>Registers</b>: the comment is used as a label, the register's value 
appears in the entry box.                                           <br />
Only assignments of the form <code>X11 = 1.234</code> are acceptable, with a floating 
point number on the right side of the equal sign. Assignments that are functions of 
already set registers (e.g., <code>X22 = X11 + 1</code>) are not shown in the form.
<br /><br />
<b>Filename sections</b>: the comment appears as a button label, the symbolic parameter's 
text value appears in the entry box.<br />
The button label, when pressed, allows the user to browse for a file. <br />
Note: this replaces a relative path name with the full absolute file path name 
in the Procedure file, e.g. <code>../filenums.hcc</code> can become 
<code>/usr13/bbaxter/projects/hcc/filenums.hcc</code> (see below).
</p>

<p>
<center><img src="pics/batform2.gif"></center>
</p>
<p>
Be careful of Procedure files that have template file names, e.g., <code>win/ser</code> will be 
expanded by SPIDER to <code>win/ser000066</code>. In this case you do not want to replace the 
text with a specific file name.
<br />
If the filename includes SPIDER's file numbering convention (e.g., <code>mic{****x11}</code>) 
Spire will attempt to keep the register in the filename.<br />

<p><hr /></p>

The buttons at the bottom:
<ul>
<p><li>
<b>Save</b>: write the values currently in the Procedure form into the Procedure file.
</li></p>

<p><li>
<b>Save as</b>: write the current values into a Procedure file with a new name.
</li></p>

<p><li>
<b>Editor</b>: open up the Procedure file in a text editor (specified in the 
<a href="options.html">Options menu - under Preferences</a>). <i>Important! If you make changes 
in a text editor, exit the Procedure form via the <b>Cancel</b> button, or else Spire will not save 
the changes you want</i>
</li></p>

<p><li>
<b>Execute!</b>: close the window and run the Procedure file in SPIDER. (Same as running it from a Dialog.)
</li></p>

<p><li>
<b>Cancel</b>: close the window without making any changes to the Procedure file text.
</li></p>
</ul>

<p>
<img src="pics/spiderline.gif"><br />
<a href="run.html">       <img src="pics/left_button.gif"></a>
<a href="index.html">     <img src="pics/up_button.gif"></a>
<a href="wellformed.html"><img src="pics/right_button.gif"></a>
</p>
</body>
</html>

