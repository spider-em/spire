<html>
<head>
  <title>SPIRE: File numbers</title>
  <LINK href="style.css" type= text/css rel=stylesheet>
</head>

<body>

<table class="navi" cellpadding=8>
<tr>
<td>                Back: <a href="wellformed.html">SPIDER Procedure file headers</a></td>
<td align="center"> Home: <a href="index.html">     Table of Contents</a></td>
<td align="right">  Next: <a href="options.html">   Options</a></td>
</tr></table>

<h1 align=center>Working with file numbers</h1>
<br /><br />
<p>
<a href="#Docfiles">Some Spider Procedure files make use of a file-numbering doc file.</a>
</p>

<p>
<a href="#FILENUMS">The symbolic parameter <b>[FILENUMS]</b> has a special meaning for Spire.</a>
</p>

<p>
<a href="#Entrybox">Users can enter file numbers in the "File numbers:" entry box in Spire's main window.</a>
</p>

<hr />

<p> <a name="Docfiles"></a>
<b>File number document files</b>
</p>

<p> The problem: you want to write a Spider DO loop that iterates over a set of files, but 
the file numbers have gaps (i.e., some numbers are missing).<br />
Solution: use a document file that lists the file numbers. The DO loop reads the keys, 
and fetches the file numbers. 
</p>

<table cellspacing=10 cellpadding=10 bgcolor="#ffffff">
<tr><td>
<pre><code><span class="eg">
 ; ----------- Input files --------------
 FR G
   [FILENUMS]../filenums   ; File numbers

 ; -------------- END Procedure HEADER -------------

 UD N,x20                  ; Get the number of files
   [FILENUMS]

 DO x11=1,x20

   UD x11,x55              ; x55 is now the micrograph number
     [FILENUMS]
   
  :
  :
</code></pre></td></tr>
</table>



<p> <a name="FILENUMS"></a>
<b>The [FILENUMS] symbolic parameter</b>
</p>

<p> Spire searches the Procedure file header for a parameter called [FILENUMS]. It must be capitalized, 
inside square brackets. If found, Spire will replace the contents of the designated doc file 
(<code>"../filenums"</code> in the example above) with the file numbers entered by the user. 
You could use any symbolic parameter, but use [FILENUMS] if you want to be able to enter file 
numbers interactively.
</p>

<p> <a name="Entrybox"></a>
<b>The "File numbers:" entry box</b>
</p>

<p> Users can enter file numbers in the "File numbers:" entry box in the lower left of Spire's 
main window. The <i>Enter</i> key writes these values to a doc file.
</p>

<img src="pics/filenums.gif" align=center>

<p> Numbers should be separated by commas. Ranges are specified by hyphens. You can mix commas and 
ranges, e.g., <b>1, 3, 5-8, 11</b> produces a doc file with <b>1, 3, 5, 6, 7, 8, 11</b> .
</p>

<p>You can use the "File numbers:" button to the left of the entry box to select a group of files. 
The file numbers of these files will be displayed in the box.
</p>

<p> <u>Saving to a file</u>: with the cursor in the File numbers entry box, hitting the <i>Enter</i> 
key writes the displayed values into the file denoted by [FILENUMS].
</p>

<p> If there are numbers in this box, Spire will create a temporary file-number doc file, <i>and use 
this temporary file instead of the file denoted by the [FILENUMS] parameter</i>. I.e., even if 
you have a doc file called filenums.doc, Spire will ignore it in place of the numbers in the display, 
as long as it is designated by [FILENUMS].
</p>

<p> This behavior can be turned off. In the <b>Commands</b> menu, select <b>Options</b>. Under the 
<a href="options.html#prefmenu">Preferences menu</a>, toggle "Use filenums entry".
</p>


<p>
<img src="pics/spiderline.gif">                           <br />
<a href="wellformed.html"><img src="pics/left_button.gif"></a>
<a href="index.html"><img src="pics/up_button.gif">       </a>
<a href="options.html"><img src="pics/right_button.gif">  </a>
</p>

</body>
</html>

